(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31993aba"],{1276:function(t,e,a){"use strict";var n=a("d784"),i=a("44e7"),r=a("825a"),c=a("1d80"),s=a("4840"),o=a("8aa5"),l=a("50c4"),u=a("14c3"),d=a("9263"),f=a("d039"),p=[].push,h=Math.min,v=4294967295,g=!f((function(){return!RegExp(v,"y")}));n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(c(this)),r=void 0===a?v:a>>>0;if(0===r)return[];if(void 0===t)return[n];if(!i(t))return e.call(n,t,r);var s,o,l,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,g=new RegExp(t.source,f+"g");while(s=d.call(g,n)){if(o=g.lastIndex,o>h&&(u.push(n.slice(h,s.index)),s.length>1&&s.index<n.length&&p.apply(u,s.slice(1)),l=s[0].length,h=o,u.length>=r))break;g.lastIndex===s.index&&g.lastIndex++}return h===n.length?!l&&g.test("")||u.push(""):u.push(n.slice(h)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var i=c(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,i,a):n.call(String(i),e,a)},function(t,i){var c=a(n,t,this,i,n!==e);if(c.done)return c.value;var d=r(t),f=String(this),p=s(d,RegExp),b=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),C=new p(g?d:"^(?:"+d.source+")",m),x=void 0===i?v:i>>>0;if(0===x)return[];if(0===f.length)return null===u(C,f)?[f]:[];var O=0,w=0,j=[];while(w<f.length){C.lastIndex=g?w:0;var S,k=u(C,g?f:f.slice(w));if(null===k||(S=h(l(C.lastIndex+(g?0:w)),f.length))===O)w=o(f,w,b);else{if(j.push(f.slice(O,w)),j.length===x)return j;for(var y=1;y<=k.length-1;y++)if(j.push(k[y]),j.length===x)return j;w=O=S}}return j.push(f.slice(O)),j}]}),!g)},"258a":function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-radius card-contain"},[a("div",{staticClass:"card-title"},[t._v("订单信息")]),a("div",{staticClass:"card-line"},[a("span",[t._v("商品图片")]),a("van-image",{staticStyle:{"vertical-align":"top","margin-left":"8px"},attrs:{width:"90",height:"90",src:t.detail.skuImg,fit:"cover",radius:"8px"}})],1),a("div",{staticClass:"card-line"},[a("span",[t._v("商品名称："+t._s(t.detail.skuName))])]),a("div",{staticClass:"card-line"},[a("span",[t._v("商品价格："+t._s(t.detail.unitPrice)+"元")])]),a("div",{staticClass:"card-line"},[a("span",[t._v("订单编号："+t._s(t.detail.orderNumber))])]),a("div",{staticClass:"card-line"},[a("span",[t._v("订单时间："+t._s(t.detail.createTime))])]),a("div",{staticClass:"card-line"},[a("span",[t._v("购买用户姓名："+t._s(t.detail.nickName))])]),a("div",{staticClass:"card-line"},[a("span",[t._v("购买用户电话："+t._s(t.detail.mobile))])])])},r=[],c=(a("b0c0"),a("ade3")),s=(a("66b9"),a("b650")),o=(a("c3a6"),a("ad06")),l=(a("5f1a"),a("a3e2")),u=(a("4056"),a("44bf")),d=(a("0cc8"),a("3104")),f=(a("5852"),a("d961")),p={props:{detail:Object},components:(n={},Object(c["a"])(n,f["a"].name,f["a"]),Object(c["a"])(n,d["a"].name,d["a"]),Object(c["a"])(n,u["a"].name,u["a"]),Object(c["a"])(n,l["a"].name,l["a"]),Object(c["a"])(n,o["a"].name,o["a"]),Object(c["a"])(n,s["a"].name,s["a"]),n),data:function(){return{form:{search:""}}},methods:{},mounted:function(){}},h=p,v=(a("3323"),a("2877")),g=Object(v["a"])(h,i,r,!1,null,"37be217e",null);e["a"]=g.exports},"2c91":function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-sticky",{attrs:{"offset-top":0,"z-index":"10"}},[a("navbar",{attrs:{title:"核销"}})],1),a("div",{staticClass:"main"},[a("h1",[t._v("核销码")]),a("van-search",{staticClass:"search",attrs:{placeholder:"请输入核销码"},on:{search:t.onSearch},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-icon",{attrs:{name:"https://static.lianhaikeji.com/unimall/D0F94DABC5C44746A00347D7F6D900F2.png",size:"22"},on:{click:t.onScanOpen}})]},proxy:!0}]),model:{value:t.form.search,callback:function(e){t.$set(t.form,"search",e)},expression:"form.search"}}),t.detail?a("product-card",{staticStyle:{"margin-top":"12px"},attrs:{detail:t.detail}}):t._e(),t.detail?a("van-button",{staticClass:"btn",attrs:{color:"#FAAD14",round:"",block:"",loading:t.submitLoading,"loading-text":"请稍后..."},on:{click:t.onSubmit}},[t._v("确认核销")]):t._e()],1)],1)},r=[],c=(a("99af"),a("c975"),a("b0c0"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),s=a("ade3"),o=(a("c3a6"),a("ad06")),l=(a("e7e5"),a("d399")),u=(a("66b9"),a("b650")),d=(a("0cc8"),a("3104")),f=(a("5852"),a("d961")),p=a("9d8d"),h=a("258a"),v=a("bc3a"),g=a.n(v),b={components:(n={},Object(s["a"])(n,f["a"].name,f["a"]),Object(s["a"])(n,d["a"].name,d["a"]),Object(s["a"])(n,u["a"].name,u["a"]),Object(s["a"])(n,l["a"].name,l["a"]),Object(s["a"])(n,o["a"].name,o["a"]),Object(s["a"])(n,"navbar",p["a"]),Object(s["a"])(n,"productCard",h["a"]),n),data:function(){return{form:{search:""},detail:null,writeOffCode:"",submitLoading:!1}},methods:{getwechatConfig:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/oauth/scanCodeConfig",{fullUrl:window.location.href,tenantId:t.$store.state.tenantId});case 2:a=e.sent,200==a.status&&window.wx.config({debug:!1,appId:a.payload.appId,timestamp:a.payload.timestamp,nonceStr:a.payload.noncestr,signature:a.payload.sign,jsApiList:["scanQRCode"]});case 4:case"end":return e.stop()}}),e)})))()},onScanOpen:function(){var t=this;window.wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){var a=e.resultStr;if(a.indexOf("http://malltest.lianhaikeji.com/merchantTool")<0)Object(l["a"])("非本店核销码");else{var n=a.split("?id=")[1];t.$router.push("/".concat(t.$store.state.tenantId,"/scanResult?id=").concat(n))}}})},onSearch:function(t){this.writeOffCode=t,this.getDetail()},getDetail:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l["a"].loading({duration:0,message:"正在查找",forbidClick:!0}),e.next=3,g.a.post("/couponCode/getCouponCodeInfo",{couponCode:t.writeOffCode});case 3:a=e.sent,l["a"].clear(),200==a.status&&(t.detail=a.payload,null===a.payload&&Object(l["a"])("没有查到该核销码"));case 6:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.submitLoading=!0,e.next=3,g.a.post("/couponCode/writeOffCouponCode",{couponCode:t.writeOffCode});case 3:a=e.sent,t.submitLoading=!1,200==a.status&&(t.detail=null,l["a"].success("已核销"),t.writeOffCode="");case 6:case"end":return e.stop()}}),e)})))()}},created:function(){this.getwechatConfig()}},m=b,C=(a("f412"),a("2877")),x=Object(C["a"])(m,i,r,!1,null,"693127d2",null);e["default"]=x.exports},3323:function(t,e,a){"use strict";var n=a("c2e2"),i=a.n(n);i.a},"44e7":function(t,e,a){var n=a("861d"),i=a("c6b6"),r=a("b622"),c=r("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==i(t))}},"5f1a":function(t,e,a){"use strict";a("68ef"),a("9d70"),a("3743"),a("9b7e")},"760c":function(t,e,a){},"9b7e":function(t,e,a){},a3e2:function(t,e,a){"use strict";var n=a("2638"),i=a.n(n),r=a("d282"),c=a("ba31"),s=a("ad06"),o=Object(r["a"])("tag"),l=o[0],u=o[1];function d(t,e,a,n){var r,o=e.type,l=e.mark,d=e.plain,f=e.color,p=e.round,h=e.size,v=d?"color":"backgroundColor",g=(r={},r[v]=f,r);e.textColor&&(g.color=e.textColor);var b={mark:l,plain:d,round:p};h&&(b[h]=h);var m=e.closeable&&t(s["a"],{attrs:{name:"cross"},class:u("close"),on:{click:function(t){t.stopPropagation(),Object(c["a"])(n,"close")}}});return t("transition",{attrs:{name:e.closeable?"van-fade":null}},[t("span",i()([{key:"content",style:g,class:u([b,o])},Object(c["b"])(n,!0)]),[null==a.default?void 0:a.default(),m])])}d.props={size:String,mark:Boolean,color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean,type:{type:String,default:"default"}},e["a"]=l(d)},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,a){var n=a("83ab"),i=a("d039"),r=a("5135"),c=Object.defineProperty,s={},o=function(t){throw t};t.exports=function(t,e){if(r(s,t))return s[t];e||(e={});var a=[][t],l=!!r(e,"ACCESSORS")&&e.ACCESSORS,u=r(e,0)?e[0]:o,d=r(e,1)?e[1]:void 0;return s[t]=!!a&&!i((function(){if(l&&!n)return!0;var t={length:-1};l?c(t,1,{enumerable:!0,get:o}):t[1]=1,a.call(t,u,d)}))}},c2e2:function(t,e,a){},c3a6:function(t,e,a){"use strict";a("68ef"),a("9d70"),a("3743")},c975:function(t,e,a){"use strict";var n=a("23e7"),i=a("4d64").indexOf,r=a("a640"),c=a("ae40"),s=[].indexOf,o=!!s&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),u=c("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:o||!l||!u},{indexOf:function(t){return o?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},f412:function(t,e,a){"use strict";var n=a("760c"),i=a.n(n);i.a}}]);