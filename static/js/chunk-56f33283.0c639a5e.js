(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56f33283"],{"0a26":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("ad06"),a=n("78eb"),s=n("9884"),o=n("ea8e"),r=function(t){var e=t.parent,n=t.bem,r=t.role;return{mixins:[Object(s["a"])(e),a["a"]],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var t=this.checkedColor||this.parent&&this.parent.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===r&&!this.checked?-1:0}},methods:{onClick:function(t){var e=this,n=t.target,i=this.$refs.icon,a=i===n||i.contains(n);this.isDisabled||!a&&this.labelDisabled?this.$emit("click",t):(this.toggle(),setTimeout((function(){e.$emit("click",t)})))},genIcon:function(){var t=this.$createElement,e=this.checked,a=this.iconSize||this.parent&&this.parent.iconSize;return t("div",{ref:"icon",class:n("icon",[this.shape,{disabled:this.isDisabled,checked:e}]),style:{fontSize:Object(o["a"])(a)}},[this.slots("icon",{checked:e})||t(i["a"],{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var t=this.$createElement,e=this.slots();if(e)return t("span",{class:n("label",[this.labelPosition,{disabled:this.isDisabled}])},[e])}},render:function(){var t=arguments[0],e=[this.genIcon()];return"left"===this.labelPosition?e.unshift(this.genLabel()):e.push(this.genLabel()),t("div",{attrs:{role:r,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:n([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[e])}}}},2381:function(t,e,n){},"3c32":function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("2381")},"417e":function(t,e,n){"use strict";var i=n("d282"),a=n("0a26"),s=Object(i["a"])("checkbox"),o=s[0],r=s[1];e["a"]=o({mixins:[Object(a["a"])({bem:r,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}}},watch:{value:function(t){this.$emit("change",t)}},methods:{toggle:function(t){var e=this;void 0===t&&(t=!this.checked),clearTimeout(this.toggleTask),this.toggleTask=setTimeout((function(){e.checked=t}))},setParentValue:function(t){var e=this.parent,n=e.value.slice();if(t){if(e.max&&n.length>=e.max)return;-1===n.indexOf(this.name)&&(n.push(this.name),e.$emit("input",n))}else{var i=n.indexOf(this.name);-1!==i&&(n.splice(i,1),e.$emit("input",n))}}}})},"78eb":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},"8a58":function(t,e,n){"use strict";n("68ef"),n("a71a"),n("9d70"),n("3743"),n("4d75")},9884:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var i=n("db85");function a(t,e){var n,a;void 0===e&&(e={});var s=e.indexKey||"index";return{inject:(n={},n[t]={default:null},n),computed:(a={parent:function(){return this.disableBindRelation?null:this[t]}},a[s]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},a),watch:{disableBindRelation:function(t){t||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);Object(i["a"])(t,this.parent),this.parent.children=t}}}}}function s(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}},a5d4:function(t,e,n){"use strict";var i=n("b372"),a=n.n(i);a.a},b372:function(t,e,n){},dd7b:function(t,e,n){"use strict";n.r(e);var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"banner"},[n("van-image",{attrs:{width:"100%",height:"195",src:"https://static.lianhaikeji.com/unimall/DBEBE19CE3EE4574934666F9C8786878.png"}})],1),n("div",{staticClass:"psdLogin"},[n("div",{staticClass:"input flex-contain flex-cross-center"},[n("van-image",{staticClass:"icon",attrs:{width:"26",height:"26",src:"https://static.lianhaikeji.com/unimall/0CF59134FC3043D088E83C1526680610.png"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.account,expression:"form.account"}],attrs:{type:"tel",placeholder:"请输入手机号"},domProps:{value:t.form.account},on:{input:function(e){e.target.composing||t.$set(t.form,"account",e.target.value)}}})],1),0==t.loginType?n("div",{staticClass:"input flex-contain flex-cross-center"},[n("van-image",{staticClass:"icon",attrs:{width:"26",height:"26",src:"https://static.lianhaikeji.com/unimall/8E4545BA6E274A339C6A684509656E00.png"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})],1):n("div",{staticClass:"input flex-contain flex-cross-center"},[n("van-image",{staticClass:"icon",attrs:{width:"26",height:"26",src:"https://static.lianhaikeji.com/unimall/2FF27725E5B446CFB079CEA502BBB68F.png"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.verifyCode,expression:"form.verifyCode"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.form.verifyCode},on:{input:function(e){e.target.composing||t.$set(t.form,"verifyCode",e.target.value)}}}),n("div",{staticClass:"code flex-contain flex-cross-center flex-main-center"},[t.codeStatus?n("van-count-down",{staticClass:"countDown",attrs:{time:t.time,format:"ss"},on:{finish:t.finish}}):n("van-button",{attrs:{round:"",loading:t.codeLoading,"loading-text":"正在发送"},on:{click:t.sendCode}},[t._v("获取验证码")])],1)],1)]),n("div",{staticClass:"flex-contain flex-main-center"},[n("van-button",{staticClass:"button",attrs:{type:"primary",round:"",color:"#FAAD14",block:"",loading:t.submitLoading,"loading-text":"正在登录"},on:{click:t.onSubmit}},[t._v("立即登录")])],1),n("div",{staticClass:"agreement"},[n("van-checkbox",{staticStyle:{float:"left"},attrs:{"checked-color":"#FAAD14"},model:{value:t.check,callback:function(e){t.check=e},expression:"check"}},[t._v("同意《隐私政策》")]),0==t.loginType?n("span",{on:{click:function(e){t.loginType=1}}},[t._v("验证码登录")]):n("span",{on:{click:function(e){t.loginType=0}}},[t._v("密码登录")])],1),n("van-popup",{attrs:{position:"bottom",round:"","close-on-click-overlay":!1},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[n("div",{staticStyle:{height:"40px"}}),n("div",{staticClass:"list"},t._l(t.storeList,(function(e,i){return n("div",{key:i,staticClass:"list-item flex-contain flex-cross-center"},[n("van-image",{attrs:{round:"",width:"42",height:"42",src:e.shopAvatar}}),n("dl",[n("dt",[t._v(t._s(e.name))])]),n("div",{staticClass:"chose",class:{active:i==t.chose},on:{click:function(e){t.chose=i}}})],1)})),0),n("div",{staticClass:"switchBtn flex-contain flex-main-center"},[n("van-button",{staticClass:"button",attrs:{type:"primary",round:"",color:"#FAAD14",block:"",disabled:null===t.chose,loading:t.submitLoading,"loading-text":"正在登录"},on:{click:t.selectStore}},[t._v("进入店铺")])],1)])],1)},s=[],o=(n("b0c0"),n("ac1f"),n("5319"),n("5530")),r=(n("96cf"),n("1da1")),c=n("ade3"),l=(n("e7e5"),n("d399")),u=(n("8a58"),n("e41f")),d=(n("414a"),n("7a82")),h=(n("3c32"),n("417e")),f=(n("66b9"),n("b650")),p=n("bc3a"),m=n.n(p),v={name:"",data:function(){return{check:!1,time:6e4,codeStatus:!1,loginType:0,form:{account:"17862800112",password:"123456"},codeLoading:!1,submitLoading:!1,showPopup:!1,storeList:[],chose:null}},computed:{token:function(){return this.$store.state.token}},components:(i={},Object(c["a"])(i,f["a"].name,f["a"]),Object(c["a"])(i,h["a"].name,h["a"]),Object(c["a"])(i,d["a"].name,d["a"]),Object(c["a"])(i,u["a"].name,u["a"]),Object(c["a"])(i,l["a"].name,l["a"]),i),created:function(){this.token&&this.getUserInfo()},methods:{sendCode:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.codeLoading=!0,e.next=3,m.a.post("/verificationCode/getVerificationCode",{shopTel:t.form.account});case 3:n=e.sent,t.codeLoading=!1,200==n.status&&(t.codeStatus=!0);case 6:case"end":return e.stop()}}),e)})))()},finish:function(){this.codeStatus=!1,this.time=6e4},onSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.check){e.next=3;break}return Object(l["a"])("请勾选同意《隐私政策》"),e.abrupt("return");case 3:return t.submitLoading=!0,n=0==t.loginType?"/auth/loginByPwd":"/auth/loginBySms",e.next=7,m.a.post(n,Object(o["a"])({},t.form));case 7:if(i=e.sent,200!=i.status){e.next=13;break}return e.next=11,t.loginSuccess(i.payload);case 11:e.next=14;break;case 13:402==i.status&&(t.showPopup=!0,t.storeList=i.payload);case 14:t.submitLoading=!1;case 15:case"end":return e.stop()}}),e)})))()},selectStore:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.submitLoading=!0,t.$store.commit("SET_MERCHANTID",t.storeList[t.chose].id),t.getUserInfo();case 3:case"end":return e.stop()}}),e)})))()},loginSuccess:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$store.commit("SET_TOKEN",t),n.next=3,e.getStoreList();case 3:case"end":return n.stop()}}),n)})))()},getStoreList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("auth/staffShops");case 2:n=e.sent,200==n.status&&(t.showPopup=!0,t.storeList=n.payload),t.submitLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},getUserInfo:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/auth/getLoginUserInfo");case 2:n=e.sent,t.submitLoading=!1,200==n.status&&(t.showPopup=!1,i=n.payload,t.$store.commit("SET_USERINFO",i),t.$route.query.redirect?t.$router.replace(t.$route.query.redirect):t.$router.replace("/"));case 5:case"end":return e.stop()}}),e)})))()}}},b=v,g=(n("a5d4"),n("2877")),k=Object(g["a"])(b,a,s,!1,null,"eaa9aa72",null);e["default"]=k.exports},e41f:function(t,e,n){"use strict";var i=n("d282"),a=n("a142"),s=n("6605"),o=n("ad06"),r=Object(i["a"])("popup"),c=r[0],l=r[1];e["a"]=c({mixins:[Object(s["a"])()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(n){return t.$emit(e,n)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var n=this.round,i=this.position,s=this.duration,r="center"===i,c=this.transition||(r?"van-fade":"van-popup-slide-"+i),u={};if(Object(a["c"])(s)){var d=r?"animationDuration":"transitionDuration";u[d]=s+"s"}return e("transition",{attrs:{name:c},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:u,class:l((t={round:n},t[i]=i,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(o["a"],{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:l("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})}}]);